{"version":3,"file":"ambient.js","sources":["../src/scripts/shared/constants.ts","../src/scripts/ambient/mail-encrypt.ts","../src/scripts/ambient/menu.ts","../src/scripts/ambient/breadcrumbs.ts","../src/scripts/ambient/pdf-in-new-window.ts","../src/scripts/ambient/to-top.ts","../src/scripts/ambient/gtm.ts","../src/scripts/ambient/background.ts"],"sourcesContent":["\r\nexport const debug = true;\r\nexport const debugDetailed = debug && false;\r\n\r\nexport const prefix = 'theme';\r\nexport const prefixBreadcrumbs = `${prefix}-breadcrumbs`;\r\nexport const prefixLanguages = `${prefix}-languages`;","import { debug } from '../shared/constants';\r\n\r\nexport function initMailDecrypt() {\r\n\r\n  if (debug) console.log('initMailDecrypt');\r\n\r\n  /* mailencrypting */\r\n  setTimeout(function () {\r\n    const mailElements = document.querySelectorAll('[data-madr1]:not(.madr-done)');\r\n    (Array.from(mailElements) as HTMLElement[]).forEach((mail, index) => {\r\n      const maddr = mail.getAttribute('data-madr1') + '@' + mail.getAttribute('data-madr2') + '.' + mail.getAttribute('data-madr3');\r\n      const linktext = mail.getAttribute('data-linktext') ? mail.getAttribute('data-linktext') : maddr;\r\n\r\n      const a = document.createElement('a');\r\n      a.setAttribute('href', `mailto:${maddr}`);\r\n      // Ensure linktext is defined (fall back to an empty string if null)\r\n      a.innerHTML = linktext || '';\r\n\r\n      if (mail.parentElement) mail.parentElement.appendChild(a);\r\n      mail.classList.add('madr-done');\r\n      mail.style.display = 'none';\r\n    });\r\n  }, 500);\r\n}","import { debug } from '../shared/constants';\r\n\r\ndeclare const bootstrap: any;\r\n\r\n// Takes care of closing the offcanvas when clicking on a navigation link\r\n// The page is not reloaded, so the offcanvas does not close\r\nexport function initOffCanvasEvents() {\r\n\r\n  if (debug) console.log('initOffCanvasEvents');\r\n\r\n  //Offcanvas close on link click\r\n  var navLinks = document.querySelectorAll(\".mobile-navigation-link\");\r\n  var navOffcanvas = document.getElementById('offcanvasNavbar')\r\n  if (navOffcanvas) {\r\n    var bsNavOffcanvas = new bootstrap.Offcanvas(navOffcanvas)\r\n    navLinks.forEach(element => {\r\n      element.addEventListener('click', () => {\r\n        bsNavOffcanvas.hide();\r\n      })\r\n    });\r\n  }\r\n}\r\n","import { prefix, debug, prefixBreadcrumbs } from '../shared/constants';\r\n\r\nexport function initBreadcrumb() {\r\n  if (debug) console.log(\"init breadcrumbs\");\r\n\r\n  setBreadcrumbsStyling() \r\n  window.addEventListener(\"resize\", setBreadcrumbsStyling);\r\n  document.addEventListener('scroll', setBreadcrumbsStyling);\r\n\r\n  var breadCrumbTrigger = document.querySelector(`.${prefixBreadcrumbs}-trigger`);\r\n  if (breadCrumbTrigger != null) {\r\n    breadCrumbTrigger.addEventListener('click', () => {\r\n      const selected = document.querySelector(`.${prefixBreadcrumbs}`);\r\n      if (debug) console.log(selected)\r\n      selected?.classList.toggle(`${prefixBreadcrumbs}-open`)\r\n    })\r\n  }\r\n}\r\n\r\nfunction setBreadcrumbsStyling() {\r\n  console.log(\"test 2dm 2024-11-25b\");\r\n\r\n  var header = document.getElementById(`${prefix}-page-navigation`);\r\n  if (header != null) {\r\n    var headerHeight = header.offsetHeight;\r\n\r\n    var breadcrumb = document.querySelector(`.${prefixBreadcrumbs}`) as HTMLElement;\r\n\r\n    if (!breadcrumb)\r\n      return;\r\n    breadcrumb.style.top = headerHeight + \"px\";\r\n    var breadcrumbOffsetTop = breadcrumb.getBoundingClientRect().top;\r\n\r\n    if (breadcrumbOffsetTop <= headerHeight && scrollY != 0) {\r\n      breadcrumb.classList.add(\"bg-light\", \"shadow\");\r\n    } else {\r\n      breadcrumb.classList.remove(\"bg-light\", \"shadow\");\r\n    }\r\n  }\r\n}\r\n","\r\n// TODO: THIS PROBABLY doesn't work reliably, as it would need to be called again when the page changes\r\n// will probably need to be moved to the interop and called on every reload\r\n// or use a timeout similar to mail-decrypt\r\n\r\n/* Open all PDF links in a new window */\r\nexport function openPdfInNewWindow() {\r\n  document.querySelectorAll('a').forEach((linkElem: Element, index) => {\r\n    if (linkElem.hasAttribute('href') && linkElem.getAttribute('href')?.endsWith('.pdf'))\r\n      linkElem.setAttribute('target', '_blank');\r\n  });\r\n}","import { debug, debugDetailed, prefix } from '../shared/constants';\r\n\r\nconst toTopElementId = `${prefix}-to-top`;\r\nconst visibleClass = `visible`;\r\n\r\nexport function initToTop() {\r\n  console.log('init to top');\r\n  toTopShowHideOnScroll();\r\n}\r\n\r\nfunction toTopShowHideOnScroll() {\r\n  if (debug) console.log('toTopShowHideOnScroll');\r\n  document.addEventListener(\"scroll\", toTopButtonVisibility);\r\n}\r\n\r\nfunction toTopButtonVisibility() {\r\n  var toTopButton = document.getElementById(toTopElementId);\r\n  if (!toTopButton) return;\r\n\r\n  // Ensure it has the event listener\r\n  toTopButton.addEventListener(\"click\", scrollTop);\r\n\r\n  // Todo: unsure why it does body + documentElement...\r\n  const show = document.body.scrollTop > 200 || document.documentElement.scrollTop > 200;\r\n  if (debugDetailed) console.log('to-top' + show ? \"show\" : \"hide\");\r\n  toTopButton.classList.toggle(visibleClass, show);\r\n}\r\n\r\nfunction scrollTop() {\r\n  window.scrollTo({ top: 0, behavior: 'smooth' });\r\n}","import { debug } from '../shared/constants';\r\n\r\n// Temporary solution to add GTM, not final!\r\nconst debugGtm = debug || true;\r\n\r\nfunction activateGtm(gtmKey: string) {\r\n  if (debugGtm) console.log('2dm test activate GTM');\r\n// <!-- Google Tag Manager -->\r\n// <script>\r\n(function(w,d,s,l,i){\r\n  (w as any)[l] = (w as any)[l] || [];\r\n  (w as any)[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});\r\n  var f=d.getElementsByTagName(s)[0],\r\n  j=d.createElement(s) as HTMLScriptElement,dl=l!='dataLayer'?'&l='+l:'';\r\n  j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;\r\n  f.parentNode!.insertBefore(j,f);\r\n})(window,document,'script','dataLayer',gtmKey);\r\n// </script> jjjj\r\n// <!-- End Google Tag Manager -->\r\n}\r\n\r\nclass GtmInterop {\r\n  activate = activateGtm;\r\n  pageView() {\r\n    if (debugGtm) console.log('gtm-interop - track page view');\r\n    gtag('event', 'blazor_page_view');//\r\n  }\r\n}\r\n\r\nwindow.dataLayer = window.dataLayer || [];\r\nfunction gtag(target: 'event', more: unknown) {\r\n  if (debug) console.log('gtm - gtag');\r\n  window.dataLayer.push(arguments);\r\n}\r\n\r\ndeclare global {\r\n  interface Window {\r\n    cre8magic: { gtm: GtmInterop },\r\n    dataLayer: unknown[],\r\n    gtag(): void,\r\n  }\r\n}\r\n\r\nexport function buildCre8magicGtm() {\r\n  window.cre8magic = window.cre8magic || {};\r\n  window.cre8magic.gtm = window.cre8magic.gtm || new GtmInterop();\r\n  window.gtag = window.gtag || gtag;\r\n}","import { debug, prefix } from './../shared/constants';\r\nimport { initMailDecrypt } from './mail-encrypt';\r\nimport { initOffCanvasEvents } from './menu';\r\nimport { initBreadcrumb } from './breadcrumbs';\r\nimport { openPdfInNewWindow } from './pdf-in-new-window';\r\nimport { initToTop } from './to-top';\r\nimport { buildCre8magicGtm } from './gtm';\r\n\r\ninitToTop();\r\n\r\nopenPdfInNewWindow();\r\n\r\ninitMailDecrypt();\r\n\r\ninitBreadcrumb();\r\n\r\ninitOffCanvasEvents();\r\n\r\nbuildCre8magicGtm();\r\nwindow.cre8magic.gtm.activate('GTM-T8W5TBL');"],"names":["prefix","prefixBreadcrumbs","prefixLanguages","initMailDecrypt","mailElements","mail","index","maddr","linktext","a","initOffCanvasEvents","navLinks","navOffcanvas","bsNavOffcanvas","element","initBreadcrumb","setBreadcrumbsStyling","breadCrumbTrigger","selected","header","headerHeight","breadcrumb","breadcrumbOffsetTop","openPdfInNewWindow","linkElem","_a","toTopElementId","visibleClass","initToTop","toTopShowHideOnScroll","toTopButtonVisibility","toTopButton","scrollTop","show","debugGtm","activateGtm","gtmKey","w","d","s","l","i","f","j","dl","GtmInterop","gtag","target","more","buildCre8magicGtm"],"mappings":"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"}