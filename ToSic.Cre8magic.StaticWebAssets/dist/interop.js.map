{"version":3,"file":"interop.js","sources":["../src/scripts/interop/interop.ts"],"sourcesContent":["import { debug } from '../shared/constants';\r\n\r\n// Temporary solution to add GTM, not final!\r\nconst debugGtm = debug || true;\r\n/**\r\n * Function to clear the <body> tag of all classes\r\n */\r\nexport function clearBodyClasses() {\r\n  var body = document.querySelector(\"body\");\r\n  body?.removeAttribute(\"class\");\r\n}\r\n\r\n/**\r\n * Function to set the body class\r\n * @param bodyClass Classes to add to the body\r\n */\r\nexport function setBodyClass(bodyClass: string) {\r\n  var body = document.body;\r\n  body.className = bodyClass;\r\n}\r\n\r\n/**\r\n * Activate Google Tag Manager\r\n * @param gtmId GTM container ID, like 'GTM-XXXXXXX'\r\n */\r\nexport function gtmActivate(gtmId: string) {\r\n  if (debugGtm) console.log('2dm test activate GTM');\r\n  // <!-- Google Tag Manager -->\r\n  // <script>\r\n  (function (w, d, s, l, i) {\r\n    (w as any)[l] = (w as any)[l] || [];\r\n    (w as any)[l].push({ 'gtm.start': new Date().getTime(), event: 'gtm.js' });\r\n    var f = d.getElementsByTagName(s)[0],\r\n      j = d.createElement(s) as HTMLScriptElement, dl = l != 'dataLayer' ? '&l=' + l : '';\r\n    j.async = true; j.src = 'https://www.googletagmanager.com/gtm.js?id=' + i + dl;\r\n    f.parentNode!.insertBefore(j, f);\r\n  })(window, document, 'script', 'dataLayer', gtmId);\r\n  // </script>\r\n  // <!-- End Google Tag Manager -->\r\n}\r\n\r\n/**\r\n * Track a page view in Google Tag Manager\r\n */\r\nexport function gtmPageView() {\r\n  // window.cre8magic.gtm.pageView();\r\n  if (debugGtm) console.log('gtm-interop - track page view');\r\n  gtag('event', 'blazor_page_view');//\r\n}\r\n\r\n/**\r\n * Track a custom event in Google Tag Manager\r\n * @param eventName Name of the event to track\r\n */\r\nexport function gtag(target: 'event', more: unknown) {\r\n  if (debugGtm) console.log('gtm - gtag');\r\n  window.dataLayer = window.dataLayer || [];\r\n  window.dataLayer.push(arguments);\r\n}\r\n"],"names":["clearBodyClasses","body","setBodyClass","bodyClass","gtmActivate","gtmId","w","d","s","l","i","f","j","dl","gtmPageView","gtag","target","more"],"mappings":"AAOO,SAASA,IAAmB;AAC7B,MAAAC,IAAO,SAAS,cAAc,MAAM;AACxC,EAAAA,KAAA,QAAAA,EAAM,gBAAgB;AACxB;AAMO,SAASC,EAAaC,GAAmB;AAC9C,MAAIF,IAAO,SAAS;AACpB,EAAAA,EAAK,YAAYE;AACnB;AAMO,SAASC,EAAYC,GAAe;AACnB,UAAA,IAAI,uBAAuB,GAGhD,SAAUC,GAAGC,GAAGC,GAAGC,GAAGC,GAAG;AACvB,IAAAJ,EAAUG,CAAC,IAAKH,EAAUG,CAAC,KAAK,CAAC,GACjCH,EAAUG,CAAC,EAAE,KAAK,EAAE,cAAiB,oBAAA,KAAA,GAAO,QAAA,GAAW,OAAO,UAAU;AACzE,QAAIE,IAAIJ,EAAE,qBAAqBC,CAAC,EAAE,CAAC,GACjCI,IAAIL,EAAE,cAAcC,CAAC,GAAwBK,IAAoC;AACnF,IAAAD,EAAE,QAAQ,IAAQA,EAAA,MAAM,gDAAgDF,IAAIG,GAC1EF,EAAA,WAAY,aAAaC,GAAGD,CAAC;AAAA,EAC9B,EAAA,QAAQ,UAAU,UAAU,aAAaN,CAAK;AAGnD;AAKO,SAASS,IAAc;AAEN,UAAA,IAAI,+BAA+B,GACzDC,EAAK,SAAS,kBAAkB;AAClC;AAMgB,SAAAA,EAAKC,GAAiBC,GAAe;AAC7B,UAAA,IAAI,YAAY,GAC/B,OAAA,YAAY,OAAO,aAAa,CAAC,GACjC,OAAA,UAAU,KAAK,SAAS;AACjC;"}