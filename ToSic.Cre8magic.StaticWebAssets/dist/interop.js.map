{"version":3,"file":"interop.js","sources":["../src/scripts/interop/gtm.ts","../src/scripts/interop/body-classes.ts","../src/scripts/interop/interop.ts"],"sourcesContent":["import { debug } from '../shared/constants';\r\n\r\n// Debug setting for GTM functionality\r\nconst debugGtm = debug || true;\r\n\r\nexport class GoogleTagManager {\r\n\r\n  /**\r\n   * Activate Google Tag Manager\r\n   * @param gtmId GTM container ID, like 'GTM-XXXXXXX'\r\n   */\r\n  addToPage(gtmId: string) {\r\n    if (debugGtm)\r\n      console.log('2dm test activate GTM');\r\n    // <!-- Google Tag Manager -->\r\n    (function (w, d, s, l, i) {\r\n      (w as any)[l] = (w as any)[l] || [];\r\n      (w as any)[l].push({ 'gtm.start': new Date().getTime(), event: 'gtm.js' });\r\n      var f = d.getElementsByTagName(s)[0],\r\n        j = d.createElement(s) as HTMLScriptElement, dl = l != 'dataLayer' ? '&l=' + l : '';\r\n      j.async = true; j.src = 'https://www.googletagmanager.com/gtm.js?id=' + i + dl;\r\n      f.parentNode!.insertBefore(j, f);\r\n    })(window, document, 'script', 'dataLayer', gtmId);\r\n  }\r\n\r\n  pageViewCounter = 0;\r\n\r\n  /**\r\n   * Track a page view in Google Tag Manager\r\n   */\r\n  pageView(verb?: string) {\r\n    this.pageViewCounter++;\r\n    if (debugGtm)\r\n      console.log(`gtm-interop - track page view: ${this.pageViewCounter}`);\r\n    // this.gtag('event', verb || 'blazor_page_view');\r\n    this.gtag({ event: verb || 'Pageview' });\r\n  }\r\n\r\n  // /**\r\n  //  * Track a custom event in Google Tag Manager\r\n  //  * @param target Usually 'event'\r\n  //  * @param more Event data\r\n  //  */\r\n  // gtagCorrected(data: { event: string | 'Pageview' }) {\r\n  //   window.dataLayer = window.dataLayer || [];\r\n  //   if (debugGtm)\r\n  //     console.log('gtm - gtag corrected', data, window.dataLayer);\r\n  //   window.dataLayer.push(data);\r\n  // }\r\n\r\n  /**\r\n   * Track a custom event in Google Tag Manager\r\n   * @param dataOrEvent Usually 'event'\r\n   * @param more Event data\r\n   */\r\n  gtag(dataOrEvent: 'event' | Record<string, unknown>, more?: unknown) {\r\n    if (debugGtm)\r\n      console.log('gtm - gtag', dataOrEvent, more, window.dataLayer);\r\n    window.dataLayer = window.dataLayer || [];\r\n    window.dataLayer.push(arguments);\r\n  }\r\n}\r\n","/**\r\n * Function to clear the <body> tag of all classes\r\n */\r\nexport function clearBodyClasses() {\r\n  var body = document.querySelector(\"body\");\r\n  body?.removeAttribute(\"class\");\r\n}\r\n\r\n/**\r\n * Function to set the body class\r\n * @param bodyClass Classes to add to the body\r\n */\r\nexport function setBodyClass(bodyClass: string) {\r\n  var body = document.body;\r\n  body.className = bodyClass;\r\n}","import { GoogleTagManager } from './gtm';\r\n\r\n// Re-export all interop functions from their respective modules\r\nexport * from './body-classes';\r\nexport * from './gtm';\r\n\r\nexport const gtm = new GoogleTagManager();"],"names":["GoogleTagManager","gtmId","w","d","l","f","j","dl","verb","dataOrEvent","more","clearBodyClasses","body","setBodyClass","bodyClass","gtm"],"mappings":"AAKO,MAAMA,EAAiB;AAAA,EAAvB,cAAA;AAoBa,SAAA,kBAAA;AAAA,EAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAdlB,UAAUC,GAAe;AAErB,YAAQ,IAAI,uBAAuB,GAEpC,SAAUC,GAAGC,GAAG,GAAGC,GAAG,GAAG;AACvB,MAAAF,EAAUE,CAAC,IAAKF,EAAUE,CAAC,KAAK,CAAC,GACjCF,EAAUE,CAAC,EAAE,KAAK,EAAE,cAAiB,oBAAA,KAAA,GAAO,QAAA,GAAW,OAAO,UAAU;AACzE,UAAIC,IAAIF,EAAE,qBAAqB,CAAC,EAAE,CAAC,GACjCG,IAAIH,EAAE,cAAc,CAAC,GAAwBI,IAAoC;AACnF,MAAAD,EAAE,QAAQ,IAAQA,EAAA,MAAM,gDAAgD,IAAIC,GAC1EF,EAAA,WAAY,aAAaC,GAAGD,CAAC;AAAA,IAC9B,EAAA,QAAQ,UAAU,UAAU,aAAaJ,CAAK;AAAA,EAAA;AAAA;AAAA;AAAA;AAAA,EAQnD,SAASO,GAAe;AACjB,SAAA,mBAEH,QAAQ,IAAI,kCAAkC,KAAK,eAAe,EAAE,GAEtE,KAAK,KAAK,EAAE,OAAOA,KAAQ,YAAY;AAAA,EAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAoBzC,KAAKC,GAAgDC,GAAgB;AAEjE,YAAQ,IAAI,cAAcD,GAAaC,GAAM,OAAO,SAAS,GACxD,OAAA,YAAY,OAAO,aAAa,CAAC,GACjC,OAAA,UAAU,KAAK,SAAS;AAAA,EAAA;AAEnC;AC1DO,SAASC,IAAmB;AAC7B,MAAAC,IAAO,SAAS,cAAc,MAAM;AACxC,EAAAA,KAAA,QAAAA,EAAM,gBAAgB;AACxB;AAMO,SAASC,EAAaC,GAAmB;AAC9C,MAAIF,IAAO,SAAS;AACpB,EAAAA,EAAK,YAAYE;AACnB;ACTa,MAAAC,IAAM,IAAIf,EAAiB;"}