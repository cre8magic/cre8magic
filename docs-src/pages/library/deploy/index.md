---
uid: Cre8magic.Library.Deploy.Index
---

# cre8magic – Package and Deploy Your Theme

> [!TIP]
> This explains how to package your theme with all the necessary assets and libraries from cre8magic ♾️.

## Introduction

A theme inside Oqtane consists a combination of

1. DLL files
1. JavaScript files
1. CSS files
1. Images

The way these are placed in your Oqtane is different during development and during deployment.
This should help you understand what is happening under the hood, to ensure your theme works as expected.

## Development Setup

During development of your theme, you will usually have a setup which does things such as:

1. Compile your theme code and deploy to your development Oqtane
1. Deploy any additional theme assets in a `wwwroot/[your-theme-name]/` folder
1. Include all necessary DLLs, including dependent cre8magic libraries
1. Include all necessary JavaScript files from cre8magic

All this is usually handled by your **Packaging** project, called `[YourCompany].Theme.[YourTheme].Package`.

Basic deployment of your theme and its assets happens through the `debug.cmd` in that project,
which was probably generated by Oqtane when the theme-project was created.

## Include cre8magic DLLs and JS During Development

When developing your theme within the cre8magic solution, you need to configure your project to properly reference and deploy the cre8magic components:

1. Add a direct project reference to the `ToSic.Cre8Magic.OqtaneBs5.Client`:
   - Open your theme's Client project file (`[YourCompany].Theme.[YourTheme]/Client/[YourCompany].Theme.[YourTheme].Client.csproj`)
   - Add the project reference with the correct relative path:

    ```xml
    <ItemGroup>
        <ProjectReference Include="..\..\ToSic.Cre8Magic.OqtaneBs5.Client\ToSic.Cre8magic.OqtaneBs5.Client.csproj" />
    </ItemGroup>
    ```

2. Configure the debug deployment script to include cre8magic DLLs:
   - Edit your theme's debug script (`[YourCompany].Theme.[YourTheme]/Package/debug.cmd`)
   - Add these commands to copy the required cre8magic libraries to your Oqtane server:

    ```cmd
    XCOPY "..\Client\bin\Debug\%TargetFramework%\ToSic.Cre8magic.Client.Oqtane.dll" "..\..\..\oqtane.framework\Oqtane.Server\bin\Debug\%TargetFramework%\" /Y
    XCOPY "..\Client\bin\Debug\%TargetFramework%\ToSic.Cre8Magic.OqtaneBs5.Client.Oqtane.dll" "..\..\..\oqtane.framework\Oqtane.Server\bin\Debug\%TargetFramework%\" /Y
    ```

> [!NOTE]
> These commands ensure that when you build your theme in debug mode, both the core cre8magic and the Bootstrap 5 implementation dlls are deployed to your Oqtane development environment also including cre8mgaic static web assets, enabling your theme to use all cre8magic features.


### Build and Verify that it Works in your Oqtane development environment

When you select **Debug** configuration and you build the *Package* project, it automatically deploys your Oqtane theme to your Oqtane Server development environment:

1. Select **Debug** configuration in Visual Studio.
1. Build the *Package* project (`[YourCompany].Theme.[YourTheme]/Package/[YourCompany].Theme.[YourTheme].Package.csproj`)
1. The build process runs the `debug.cmd` script, which copies relevant files to your Oqtane development environment
1. Theme-related DLL files will be placed in the `oqtane\oqtane.framework\Oqtane.Server\bin\Debug\net9.0` folder
1. Theme static assets will be copied to the `oqtane\oqtane.framework\Oqtane.Server\wwwroot\Themes\[YourCompany].Theme.[YourTheme]` folder and `oqtane\oqtane.framework\Oqtane.Server\wwwroot\_content\ToSic.Cre8magic.Oqtane` folder

To verify it works:
1. Run the Oqtane development environment (`Oqtane.Server` project).
1. Oqtane will automatically detect and install your theme during startup.
1. Log in to your Oqtane admin account
1. Navigate to any page and access its `Page Management` settings.
1. Go to the "Appearance" section .
1. Your theme should be available in the dropdown list of themes and containers.
1. Select your theme and verify it renders correctly

If the theme doesn't appear in the list or doesn't render correctly, check the theme's *Package* project **Build** log in Visual Studio's **Output** window.

### Test an Updated Version in your Oqtane development environment

After making changes to your theme you can quickly test the updates:

1. Select **Debug** configuration in Visual Studio if is not selected.
1. **Rebuild** the *Package* project (`[YourCompany].Theme.[YourTheme].Package.csproj`).
1. The updated files will automatically deploy to your Oqtane Server development environment.
1. Run the Oqtane development environment (`Oqtane.Server` project).
1. Navigate to a page using your theme and verify the changes are visible

> [!NOTE]
> If your changes don't appear:
> - Make sure your browser isn't caching the page (try a hard refresh with Ctrl+F5)
> - Examine the theme's *Package* project **Build** log in Visual Studio's **Output** window for any errors


## Include cre8magic DLLs and JS in Package (Deployment)

When you are ready to deploy your theme to a production server,
you will need to create a NuGet package containing all these resources.
It will contain things like:

1. Your theme DLLs
1. Your theme JavaScript files
1. Your theme CSS files
1. Your theme images
1. All necessary DLLs, including dependent cre8magic libraries
1. All necessary JavaScript files from cre8magic in the `/wwwroot/_content/ToSic.Cre8magic.Oqtane/` folder

This is also handled by your **Packaging** project, called `[YourCompany].Theme.[YourTheme].Package`.

The part that makes it happen is the `release.cmd` in that project,
which was probably generated by Oqtane when the theme-project was created.

> [!IMPORTANT]
> The default `release.cmd` is not smart enough to handle additional libraries and resources,
> so you might need to adjust it to include the cre8magic resources.

## Changes to Ensure cre8magic Assets and DLLs are Included

To properly package your theme with cre8magic dependencies for production deployment, follow these steps:

1. **Switch from project references to NuGet package references**:
   - Open your theme's client project file: `[YourCompany].Theme.[YourTheme]/Client/[YourCompany].Theme.[YourTheme].Client.csproj`
   - Remove the previous `ProjectReference` to cre8magic projects (used during development) so we can add a `PackageReference` to the cre8magic NuGet package instead later.

1. **Configure the static assets path**:
   - Add this property to the first `<PropertyGroup>` section:

    ```xml
    <OqtaneStaticAssetsPath>../../../oqtane.framework/Oqtane.Server/wwwroot/_content/ToSic.Cre8magic.Oqtane</OqtaneStaticAssetsPath>
    ```

    > [!NOTE]
    > This property defines where cre8magic assets will be copied during build. The path follows ASP.NET Core conventions for static assets from Razor Class Libraries.

1. **Add the cre8magic package reference with path generation**:
   - Add this to your package references section (replace N.N.N with the actual version):

    ```xml
    <PackageReference Include="ToSic.Cre8magic.Oqtane" Version="N.N.N" GeneratePathProperty="true" />
    ```

    > [!TIP]
    > The `GeneratePathProperty="true"` attribute creates an MSBuild property (`$(PkgToSic_Cre8magic_Oqtane)`) that points to the installed package location, allowing access to its assets during the build process.

1. **Add a build task to copy the static assets**:
   - Add this target to your project file:

    ```xml
    <Target Name="CopyStaticWebAssets" AfterTargets="Build">
      <ItemGroup>
        <StaticAssets Include="$(PkgToSic_Cre8magic_Oqtane)\staticwebassets\**\*" />
      </ItemGroup>
      <MakeDir Directories="$(OqtaneStaticAssetsPath)" />
      <Copy SourceFiles="@(StaticAssets)"
            DestinationFiles="@(StaticAssets->'$(OqtaneStaticAssetsPath)/%(RecursiveDir)%(Filename)%(Extension)')"
            SkipUnchangedFiles="true" />
    </Target>
    ```

    > [!NOTE]
    > For Oqtane themes, this build task ensures that cre8magic shared static web assets (like CSS, JavaScript, images, etc.) from the `ToSic.Cre8magic.Oqtane` package are copied during the build process, which is essential for proper theme rendering.


1. Open the `[YourCompany].Theme.[YourTheme]/Package/[YourCompany].Theme.[YourTheme].nuspec` file and add the following lines to include cre8magic DLLs and static web assets in the package:

    ```xml
    <file src="..\Client\bin\Release\$targetframework$\ToSic.Cre8magic.Client.Oqtane.dll" target="lib\$targetframework$" />
    <file src="..\Client\bin\Release\$targetframework$\ToSic.Cre8Magic.OqtaneBs5.Client.Oqtane.dll" target="lib\$targetframework$" />
    <file src="..\..\..\oqtane.framework\Oqtane.Server\wwwroot\_content\ToSic.Cre8magic.Oqtane\**\*.*" target="wwwroot\_content\ToSic.Cre8magic.Oqtane" />
    ```

### Build and Test in a Standalone Oqtane Installation

To create a deployable package for production-like environment:
1. Select **Release** configuration in Visual Studio
1. Ensure you've incremented the version in `[YourCompany].Theme.[YourTheme].nuspec` (in `[YourCompany].Theme.[YourTheme]/Package` folder) if making changes
1. Build the *Package* project (e.g., `[YourCompany].Theme.[YourTheme].Package.csproj`)
1. The build process runs `release.cmd`, which creates a NuGet package
1. The resulting theme package (e.g., `[YourCompany].Theme.[YourTheme].N.N.N.nupkg`) will be in the `Package` folder

To install and test your theme in a standalone Oqtane installation:
1. Copy the `[YourCompany].Theme.[YourTheme].N.N.N.nupkg` file to your Oqtane server's `Packages` folder, or use the **Admin Dashboard > Theme Management > Install Theme** option
1. In Oqtane, go to **Admin Dashboard > System Info** and click **Restart Application**
1. After restart, verify the theme was installed in **Admin Dashboard > Theme Management**
1. Navigate to any page and open its **Page Management** settings
1. In the **Appearance** section, your theme should be available in the dropdown list
1. Select your theme and verify it renders correctly

> [!TIP]
> If your theme doesn't appear or doesn't render properly:
> - Check Oqtane logs in the `Packages` and `wwwroot/Logs` folder
> - Verify the package was properly created by examining it with a tool like NuGet Package Explorer
> - Ensure all required dependencies are available in the target environment

### Testing Theme Updates in Production

When updating an existing theme installation:
1. Select **Release** configuration in Visual Studio
2. **Important**: Increment the version in the `[YourCompany].Theme.[YourTheme].nuspec` file to ensure Oqtane recognizes it as an update
3. Rebuild the *Package* project to generate the updated package
4. Copy the new `[YourCompany].Theme.[YourTheme].N.N.N.nupkg` file to the Oqtane server's `Packages` folder
5. In Oqtane, go to **Admin Dashboard > System Info** and click **Restart Application**
6. The updated theme will be automatically detected and installed
7. Navigate to a page using your theme and verify your changes are visible

> [!NOTE]
> Oqtane caches themes aggressively. If you don't see your changes after restarting, you may need to:
> - Clear browser cache (Ctrl+F5)